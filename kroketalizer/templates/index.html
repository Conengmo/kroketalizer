
{% extends "base.html" %}


{% block content %}

  <div style="height: 500px; margin-top:-120px;  z-index:-1">
    <video id="jumbotronVideo" autoplay muted width="100%" height='500px' style="object-fit: cover;"
           src="/static/video/{{ videos.0 }}">
    </video>

    <div style="position: relative;top: -350px;color: white;">
      <div class="container py-5">
        <h1 class="display-5 fw-bold">{{ jumbotron_title }}</h1>
        <p class="col-md-8 fs-4">{{ jumbotron_text }}</p>
      </div>
    </div>

  </div>

  <main role="main" class="container">

    <div class="row row-cols-3 g-4">
      {% for item in content %}
        <div class="col">
          <div class="card h-100">
            <img src="/static/img/{{ item.2 }}" class="card-img-top"
                 style="aspect-ratio: 16 / 9; object-fit: cover;">
            <div class="card-body">
              <h3 class="card-title">{{ item.0 }}</h3>
              {% for paragraph in item.1 %}
                <p class="card-text">{{ paragraph }}</p>
              {% endfor%}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

  </main>

{% endblock %}


{% block script %}
  <script>
      const videoElement = document.getElementById("jumbotronVideo");

      videoElement.addEventListener('ended', function() {
          let current = videoElement.getAttribute('src');
          let options = [
              {% for video_file in videos %}
              '/static/video/{{ video_file }}',
              {% endfor %}
          ];
          options = options.filter(function(value) {return value !== current});
          let pick = options[Math.floor(Math.random() * options.length)];
          videoElement.setAttribute("src", pick);
          videoElement.load();
          videoElement.play();
      });

  </script>

{% endblock script %}