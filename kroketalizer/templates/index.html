
{% extends "base.html" %}


{% block style %}
  <style>
      .media-button {
          position:relative;
          top: -300px;
          float: right;
          right: 50px;
      }
      .sound-button img {
          width: 33px;
          height: 33px;
      }
      .video-button img {
          width: 25px;
          height: 25px;
          margin-top: 4px;
          margin-left:  10px;
      }

      .jumbotron-wrapper {
          height: 880px;
          margin-top: -70px;
          background-color: #544300;
          clip-path: circle(1500px at 42% -620px);
      }
      #jumbotronVideo {
          width: 100%;
          height: 880px;
          object-fit: cover;
          opacity: 0.8;
      }
      .jumbotron-text {
          position: relative;
          top: -800px;
          color: white;
          font-family: open-sans, sans-serif;
      }

      @media only screen and (max-width: 760px) {
          .jumbotron-wrapper {
              background-color: black;
          }
          #jumbotronVideo {
              display: none;
          }
          .jumbotron-video-replacement {
              height: 100%;
              background-image: url('/static/img/pexels-cottonbro-4253305.jpg');
              background-size: contain;
              opacity: 0.75;
          }
          .media-button {
              display: none;
          }
      }


  </style>
{% endblock style %}


{% block content %}

  <div class="jumbotron-wrapper">
    <video id="jumbotronVideo" muted preload="none" src="/static/video/{{ videos.0 }}"></video>
    <div class="jumbotron-video-replacement"></div>

    <span id="playButton" class="media-button video-button">
      <img src="{{ url_for('static', filename='icons/play.svg') }}" alt="play video"></span>
    <span id="pauseButton" class="media-button video-button" style="display:none">
      <img src="{{ url_for('static', filename='icons/pause.svg') }}" alt="pause video"></span>

    <span id="muteButton" class="media-button sound-button" style="display:none">
      <img src="{{ url_for('static', filename='icons/mute.svg') }}" alt="mute"></span>
    <span id="unmuteButton" class="media-button sound-button">
      <img src="{{ url_for('static', filename='icons/speaker.svg') }}" alt="unmute"></span>

    <div class="jumbotron-text">
      <div class="container py-5">
        <div class="row">
          <div class="col-lg-4 col-md-2">
            <div style="border-bottom: 3px white solid; display:flex; padding-bottom:20px; margin-bottom:25px;">
                <img src="{{ url_for('static', filename='icons/hamburger.svg') }}" width="120px" height="120px"
                     alt="hamburger icon" style="filter:invert(1); align-self:center;">
              <div class="fs-1 ps-3 logo-text" style="align-self:center; line-height: 1.2; letter-spacing: 0.18rem;">
                HET<br/>KROKET<br/>GEBOUW
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <h2 class="fs-3 fw-bold" style="">Samen smaakt alles beter</h2>
          </div>
        </div>
      </div>
    </div>

  </div>

  <main role="main" class="container">

  <div class="main-inner">

    <div class="row row-cols-lg-2 row-cols-md-2 row-cols-1 g-4 mb-5">
      {% for item in content_top %}
        <div class="col">
          <div class="card h-100 text-white">
            <img src="/static/img_random/{{ item.2 }}" class="card-img"
                 style="aspect-ratio: 16 / 9; object-fit: cover;">
            <div class="card-img-overlay p-5">
              <p class="card-text">{{ item.1 }}</p>
              <h3 class="card-title">{{ item.0 }}</h3>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="row mb-3">
      <div class="col">
        <h2>Aankomend</h2>
      </div>
    </div>
    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-1" style="margin-bottom:100px;">
      {% for item in content_mid %}
      <div class="col">
        <div class="card mb-4">
          <img src="/static/img_random/{{ item.2 }}" class="card-img"
               style="aspect-ratio: 16 / 7; object-fit:cover; border-radius: 2rem 2rem 0 0">
          <div class="card-body">
            <h5 class="card-title">{{ item.0 }}</h5>
            <p class="card-text">{{ item.1 }}</p>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <div class="row row-cols-lg-3 row-cols-md-2 row-cols-1 g-4">
      {% for item in content_bottom %}
        <div class="col p-4">
          <div class="card h-100 p-3">
            <img src="/static/img_random/{{ item.2 }}" class="card-img-top"
                 style="aspect-ratio: 16 / 13; object-fit: cover;">
            <div class="card-body py-4 px-0">
              <h4 class="card-title">{{ item.0 }}</h4>
              <p class="card-text">{{ item.1 }}</p>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

  </div>
  </main>

{% endblock %}


{% block script %}

  <script>

  document.addEventListener("DOMContentLoaded", function(event) {

      const videoElement = document.getElementById("jumbotronVideo");

      if (getComputedStyle(videoElement).getPropertyValue('display') !== 'none') {
          videoElement.play();

          videoElement.addEventListener('ended', function () {
              let current = videoElement.getAttribute('src');
              let options = [
                  {% for video_file in videos %}
                      '/static/video/{{ video_file }}',
                  {% endfor %}
              ];
              options = options.filter(function (value) {
                  return value !== current
              });
              let pick = options[Math.floor(Math.random() * options.length)];
              videoElement.setAttribute("src", pick);
              videoElement.play();
          });

          const music = new Audio("{{ url_for('static', filename='/audio/carl_filtsch_romance_op_3_no_1.mp3') }}");
          music.muted = true;
          music.loop = true;
          music.play();

          videoElement.onplay = function () {
              document.getElementById('playButton').style.display = 'none';
              document.getElementById('pauseButton').style.display = 'inherit';
          }
          videoElement.onpause = function () {
              document.getElementById('playButton').style.display = 'inherit';
              document.getElementById('pauseButton').style.display = 'none';
          }

          document.getElementById('playButton').onclick = function () {
              music.play();
              videoElement.play();
          }
          document.getElementById('pauseButton').onclick = function () {
              music.pause();
              videoElement.pause();
          }

          document.getElementById('muteButton').onclick = function () {
              music.muted = true;
              document.getElementById('muteButton').style.display = 'none';
              document.getElementById('unmuteButton').style.display = 'inherit';
          }
          document.getElementById('unmuteButton').onclick = function () {
              music.muted = false;
              document.getElementById('muteButton').style.display = 'inherit';
              document.getElementById('unmuteButton').style.display = 'none';
          }

      }  // end check not on mobile

  });

  </script>

{% endblock script %}